<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RWBY Page</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="./images/apple-touch-icon.png" sizes="96x96" />
</head>
<body>
    <div class="rwbylogo">
        <img src="./images/rwby logo.jpg" alt="RWBY LOGO">
    </div>

    <div class="sidebar-welcome">
        <h2>Hello, <span id="userEmail">[User's Email]</span>!</h2>
        <button id="logoutButton" class="logout-button" title="Logout">
            <span class="material-icons">logout</span>
        </button>
    </div>

    <div class="songs">
        <p id="songTitle">This Will Be the Day</p>
        <audio id="audioPlayer" controls loop>
            <source id="audioSource" src="songs/This Will Be The Day (feat. Casey Lee Williams) by Jeff Williams with Lyrics.mp3">
        </audio>
        <button id="nextButton" class="next-button">Next</button> <!-- Next button here -->
    </div>

    <!-- New section for history, seasons, and songs -->
    <div class="rwby-info">
        <!-- RWBY History -->
        <div class="rwby-history">
            <h3>RWBY History/Story</h3>
            <p>RWBY is an American animated web series created by Monty Oum and produced by Rooster Teeth. The series focuses on four girls, Ruby, Weiss, Blake, and Yang, as they train to become hunters at Beacon Academy, to fight creatures known as Grimm.
            </p>
            <p>
                Four teenage girls form Team RWBY and train to fight crime and monsters known as the Grimm, while the world of Remnant remains on the brink of an all-out war. Four teenage girls form Team RWBY and train to fight crime and monsters known as the Grimm, while the world of Remnant remains on the brink of an all-out war.
            </p>

        </div>

        <!-- RWBY Seasons and Episode Count -->
        <div class="rwby-seasons">
            <h3>Seasons and Episodes</h3>
            <ul>
                <li>Season 1: 16 Episodes</li>
                <li>Season 2: 12 Episodes</li>
                <li>Season 3: 12 Episodes</li>
                <li>Season 4: 12 Episodes</li>
                <li>Season 5: 14 Episodes</li>
                <li>Season 6: 13 Episodes</li>
                <li>Season 7: 13 Episodes</li>
                <li>Season 8: 14 Episodes</li>
                <li>Season 9: 10 Episodes</li>
            </ul>
        </div>

        <!-- Song Selection from RWBY -->
        <div class="rwby-songs">
            <h3>Opening Songs Selection</h3>
            <ul>
                <li>"This Will Be The Day" - RWBY Volume 1</li>
                <li>"Time to Say Goodbye" - RWBY Volume 2</li>
                <li>"When It Falss" - RWBY Volume 3</li>
                <li>"Let's Just Live" - RWBY Volume 4</li>
                <li>"Triumph" - RWBY Volume 5</li>
                <li>"Rising" - RWBY Volume 6</li>
                <li>"Trust Love" - RWBY Volume 7</li>
                <li>"For Every Life" - RWBY Volume 8</li>
                <li>"Inside" - RWBY Volume 9</li>
            </ul>
        </div>

        <div class="rwby-va-ch">
            <h3>Voice Actresses</h3>
            <div class="image-grid">
                <div class="image-item">
                    <img src="./images/lindsay jones.jpg" alt="lindsay jones">
                    <p>Lindsay Jones</p>
                </div>
                <div class="image-item">
                    <img src="./images/kara eberle.jpg" alt="kara eberle">
                    <p>Kara Eberle</p>
                </div>
                <div class="image-item">
                    <img src="./images/arryn zechhh.jpg" alt="arryn zech">
                    <p>Arryn Zech</p>
                </div>
                <div class="image-item">
                    <img src="./images/barbara dunkelman.jpg" alt="barbara Dunkelman">
                    <p>Barbara Dunkelman</p>
                </div>
            </div>
        </div>
        <div class="rwby-characters">
            <h3>Main Four Characters</h3>
            <div class="rwby-grid">
                <div class="rwby-item">
                    <img src="./images/ruby rose.jpg" alt="ruby rose">
                    <p>Ruby Rose:<br>The optimistic and courageous leader of Team RWBY, Ruby wields a powerful scythe named Crescent Rose and dreams of becoming a Huntress to protect others from the Grimm. </p>
                </div>
                <div class="rwby-item">
                    <img src="./images/weiss schnee.png" alt="weiss schnee">
                    <p>Weiss Schnee:<br>Heiress to the Schnee Dust Company, Weiss is a skilled swordswoman with a refined demeanor weilding a weapon named Myrtenaster. She uses her familys powerful glyphs to enhance her combat, blending elegance with fierce determination.</p>
                </div>
                <div class="rwby-item">
                    <img src="./images/blake belladonna.jpg" alt="blake belladonna">
                    <p>Blake Belladonna:<br>A mysterious and reserved Faunus, Blake fights for justice and equality. Her agility and stealth make her a formidable fighter, and her weapon Gambol Shroud complements her swift, cat-like movements.</p>
                </div>
                <div class="rwby-item">
                    <img src="./images/yang xiao long.png" alt="yang xiao long">
                    <p>Yang Xiao Long:<br>Ruby's half-sister and the team's powerhouse, Yang has a fiery personality and incredible strength. She wields Ember Celica, shotgun gauntlets, and her passion and loyalty drive her to protect those she loves.</p>
                </div>
            </div>
        </div>

        <div class="rwby-weapons">
            <h3>Main Weapons</h3>
            <div class="weapon-grid">
                <div class="weapon-item">
                    <img src="./images/crescent rose.png" alt="Crescent rose">
                    <p>Crescent Rose</p>
                </div>
                <div class="weapon-item">
                    <img src="./images/myrtenaster.jpg" alt="Myrtenaster">
                    <p>Myrtenaster</p>
                </div>
                <div class="weapon-item">
                    <img src="./images/gambol shroud.jpg" alt="gambol Shroud">
                    <p>Gambol Shroud</p>
                </div>
                <div class="weapon-item">
                    <img src="./images/ember celica.png" alt="Ember Celica">
                    <p>Ember Celica</p>
                </div>
            </div>
        </div>

        
    </div>
    
    <footer class="footer">
        <p>Do you believe in destiny?</p>
    </footer>
    <script>
    // Fetch user details when the page loads
    document.addEventListener('DOMContentLoaded', function () {
        fetchUserDetails();
    });

    async function fetchUserDetails() {
        try {
            const response = await fetch('/user-details', { credentials: 'include' });
            if (!response.ok) {
                throw new Error('Failed to fetch user details.');
            }
            const data = await response.json();
            if (data.success) {
                // Update the element with user email
                document.getElementById('userEmail').textContent = data.user.email;
            } else {
                console.error('Failed to fetch user details:', data.message);
            }
        } catch (error) {
            console.error('Error fetching user details:', error);
        }
    }

    // Add logout functionality
    document.getElementById('logoutButton').addEventListener('click', function (event) {
        event.preventDefault();
        performLogout();
    });

    async function performLogout() {
        try {
            const response = await fetch('/logout', {
                method: 'POST',
                credentials: 'include'
            });
            if (response.ok) {
                // Redirect to login page
                window.location.href = 'login.html';
            } else {
                console.error('Logout failed');
            }
        } catch (error) {
            console.error('Error during logout:', error);
        }
    }

    // Song list for RWBY
    const songs = [
            { title: "This Will Be The Day", src: "songs/This Will Be The Day (feat. Casey Lee Williams) by Jeff Williams with Lyrics.mp3" },
            { title: "Time to Say Goodbye", src: "songs/Time To Say Goodbye by Jeff Williams and Casey Lee Williams with Lyrics.mp3" },
            { title: "When It Falls", src: "songs/When It Falls (feat. Casey Lee Williams).mp3" },
            { title: "Let's Just Live", src: "songs/Let's Just Live (feat. Casey Lee Williams).mp3" },
            { title: "The Triumph", src: "songs/The Triumph (feat. Casey Lee Williams).mp3" },
            { title: "Rising", src: "songs/Rising (feat. Casey Lee Williams).mp3" },
            { title: "Trust Love", src: "songs/Trust Love (feat. Casey Lee Williams).mp3" },
            { title: "For Every Life", src: "songs/For Every Life (feat. Casey Lee Williams).mp3" },
            { title: "Inside", src: "songs/Inside (Music from RWBY, Vol. 9).mp3" }
        ];
        let currentSongIndex = 0; // Start with the first song

// Update the audio player with the next song
function updateSong() {
    const audioPlayer = document.getElementById("audioPlayer");
    const songTitle = document.getElementById("songTitle");
    const audioSource = document.getElementById("audioSource");

    // Set the source of the audio and update the song title
    audioSource.src = songs[currentSongIndex].src;
    songTitle.textContent = songs[currentSongIndex].title;

    // Reload the audio player to play the new song
    audioPlayer.load();
    audioPlayer.play();
}

// Next button functionality
document.getElementById("nextButton").addEventListener("click", function() {
    currentSongIndex = (currentSongIndex + 1) % songs.length; // Move to the next song in the list, looping back to the first song
    updateSong();
});

// Initial song setup
updateSong();
    </script>
</body>
</html>
